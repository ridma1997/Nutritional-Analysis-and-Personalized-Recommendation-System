{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rarrr\\\\Documents\\\\BCAS Degree\\\\Dissertation project\\\\Nutritional App\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nfunction Dashboard() {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [chartData, setChartData] = useState({\n    labels: [],\n    datasets: [{\n      label: \"Calorie Intake\",\n      data: [],\n      borderColor: \"rgba(75,192,192,1)\",\n      backgroundColor: \"rgba(75,192,192,0.2)\",\n      fill: true\n    }]\n  });\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    const fetchCalorieData = async () => {\n      if (!user || !user.id) {\n        setError(\"User details are missing. Please log in again.\");\n        return;\n      }\n      try {\n        const response = await axios.get(\"http://localhost:5000/api/calorie-data\", {\n          params: {\n            user_id: user.id\n          }\n        });\n        if (response.status === 200) {\n          const {\n            labels,\n            calorieData\n          } = response.data;\n          setChartData({\n            labels,\n            datasets: [{\n              label: \"Calorie Intake\",\n              data: calorieData,\n              borderColor: \"rgba(75,192,192,1)\",\n              backgroundColor: \"rgba(75,192,192,0.2)\",\n              fill: true\n            }]\n          });\n          setError(\"\");\n        }\n      } catch (err) {\n        setError(\"Failed to fetch calorie data. Please try again later.\");\n        console.error(err);\n      }\n    };\n    fetchCalorieData();\n  }, [user]);\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: \"top\"\n      },\n      title: {\n        display: true,\n        text: \"Monthly Calorie Intake\"\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"CpMjr3OnnI4ywRrI0i+vivzTTZY=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","axios","useContext","UserContext","jsxDEV","_jsxDEV","register","Dashboard","_s","user","chartData","setChartData","labels","datasets","label","data","borderColor","backgroundColor","fill","error","setError","fetchCalorieData","id","response","get","params","user_id","status","calorieData","err","console","options","responsive","plugins","legend","position","title","display","text","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","_c","$RefreshReg$"],"sources":["C:/Users/rarrr/Documents/BCAS Degree/Dissertation project/Nutritional App/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport axios from \"axios\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nfunction Dashboard() {\r\n  const { user } = useContext(UserContext);\r\n  const [chartData, setChartData] = useState({\r\n    labels: [],\r\n    datasets: [\r\n      {\r\n        label: \"Calorie Intake\",\r\n        data: [],\r\n        borderColor: \"rgba(75,192,192,1)\",\r\n        backgroundColor: \"rgba(75,192,192,0.2)\",\r\n        fill: true,\r\n      },\r\n    ],\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchCalorieData = async () => {\r\n      if (!user || !user.id) {\r\n        setError(\"User details are missing. Please log in again.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\"http://localhost:5000/api/calorie-data\", {\r\n          params: { user_id: user.id },\r\n        });\r\n\r\n        if (response.status === 200) {\r\n          const { labels, calorieData } = response.data;\r\n          setChartData({\r\n            labels,\r\n            datasets: [\r\n              {\r\n                label: \"Calorie Intake\",\r\n                data: calorieData,\r\n                borderColor: \"rgba(75,192,192,1)\",\r\n                backgroundColor: \"rgba(75,192,192,0.2)\",\r\n                fill: true,\r\n              },\r\n            ],\r\n          });\r\n          setError(\"\");\r\n        }\r\n      } catch (err) {\r\n        setError(\"Failed to fetch calorie data. Please try again later.\");\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    fetchCalorieData();\r\n  }, [user]);\r\n\r\n  const options = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: \"top\",\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: \"Monthly Calorie Intake\",\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Dashboard</h1>\r\n      {error ? (\r\n        <p style={{ color: \"red\" }}>{error}</p>\r\n      ) : (\r\n        <Line data={chartData} options={options} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SACEC,KAAK,IAAIC,OAAO,EAChBC,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,KAAK,EACLC,OAAO,EACPC,MAAM,QACD,UAAU;AACjB,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,OAAO;AAClC,SAASC,WAAW,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErDb,OAAO,CAACc,QAAQ,CACdb,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,KAAK,EACLC,OAAO,EACPC,MACF,CAAC;AAED,SAASQ,SAASA,CAAA,EAAG;EAAAC,EAAA;EACnB,MAAM;IAAEC;EAAK,CAAC,GAAGP,UAAU,CAACC,WAAW,CAAC;EACxC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC;IACzCsB,MAAM,EAAE,EAAE;IACVC,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,gBAAgB;MACvBC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,oBAAoB;MACjCC,eAAe,EAAE,sBAAsB;MACvCC,IAAI,EAAE;IACR,CAAC;EAEL,CAAC,CAAC;EACF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,MAAMgC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACZ,IAAI,IAAI,CAACA,IAAI,CAACa,EAAE,EAAE;QACrBF,QAAQ,CAAC,gDAAgD,CAAC;QAC1D;MACF;MAEA,IAAI;QACF,MAAMG,QAAQ,GAAG,MAAMtB,KAAK,CAACuB,GAAG,CAAC,wCAAwC,EAAE;UACzEC,MAAM,EAAE;YAAEC,OAAO,EAAEjB,IAAI,CAACa;UAAG;QAC7B,CAAC,CAAC;QAEF,IAAIC,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;UAC3B,MAAM;YAAEf,MAAM;YAAEgB;UAAY,CAAC,GAAGL,QAAQ,CAACR,IAAI;UAC7CJ,YAAY,CAAC;YACXC,MAAM;YACNC,QAAQ,EAAE,CACR;cACEC,KAAK,EAAE,gBAAgB;cACvBC,IAAI,EAAEa,WAAW;cACjBZ,WAAW,EAAE,oBAAoB;cACjCC,eAAe,EAAE,sBAAsB;cACvCC,IAAI,EAAE;YACR,CAAC;UAEL,CAAC,CAAC;UACFE,QAAQ,CAAC,EAAE,CAAC;QACd;MACF,CAAC,CAAC,OAAOS,GAAG,EAAE;QACZT,QAAQ,CAAC,uDAAuD,CAAC;QACjEU,OAAO,CAACX,KAAK,CAACU,GAAG,CAAC;MACpB;IACF,CAAC;IAEDR,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACZ,IAAI,CAAC,CAAC;EAEV,MAAMsB,OAAO,GAAG;IACdC,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE;MACPC,MAAM,EAAE;QACNC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAE;QACLC,OAAO,EAAE,IAAI;QACbC,IAAI,EAAE;MACR;IACF;EACF,CAAC;EAED,oBACEjC,OAAA;IAAAkC,QAAA,gBACElC,OAAA;MAAAkC,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACjBxB,KAAK,gBACJd,OAAA;MAAGuC,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAM,CAAE;MAAAN,QAAA,EAAEpB;IAAK;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,gBAEvCtC,OAAA,CAACL,IAAI;MAACe,IAAI,EAAEL,SAAU;MAACqB,OAAO,EAAEA;IAAQ;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC3C;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAACnC,EAAA,CA5EQD,SAAS;AAAAuC,EAAA,GAATvC,SAAS;AA8ElB,eAAeA,SAAS;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}