{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rarrr\\\\Documents\\\\BCAS Degree\\\\Dissertation project\\\\Nutritional App\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport { UserContext } from \"../context/UserContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [chartData, setChartData] = useState(null);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    const fetchCalorieData = async () => {\n      if (!user || !user.id) {\n        setError(\"User details are missing. Please log in again.\");\n        return;\n      }\n      try {\n        const response = await axios.get(\"http://localhost:5000/api/calorie-predictions\", {\n          params: {\n            user_id: user.id\n          }\n        });\n        const {\n          labels,\n          calorieData\n        } = response.data;\n        setChartData({\n          labels,\n          datasets: [{\n            label: \"Calorie Intake\",\n            data: calorieData,\n            borderColor: \"rgba(75,192,192,1)\",\n            backgroundColor: \"rgba(75,192,192,0.2)\",\n            fill: true\n          }]\n        });\n        setError(\"\");\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to fetch calorie data. Please try again later.\");\n      }\n    };\n    fetchCalorieData();\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"2rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this) : chartData && /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData,\n      options: {\n        responsive: true\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"Px8MfLH7IcdYD3CbPHrEJjoONh4=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","Line","axios","UserContext","jsxDEV","_jsxDEV","Dashboard","_s","user","useContext","chartData","setChartData","error","setError","fetchCalorieData","id","response","get","params","user_id","labels","calorieData","data","datasets","label","borderColor","backgroundColor","fill","err","console","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","options","responsive","_c","$RefreshReg$"],"sources":["C:/Users/rarrr/Documents/BCAS Degree/Dissertation project/Nutritional App/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../context/UserContext\";\r\n\r\nfunction Dashboard() {\r\n  const { user } = useContext(UserContext);\r\n  const [chartData, setChartData] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchCalorieData = async () => {\r\n      if (!user || !user.id) {\r\n        setError(\"User details are missing. Please log in again.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\"http://localhost:5000/api/calorie-predictions\", {\r\n          params: { user_id: user.id },\r\n        });\r\n\r\n        const { labels, calorieData } = response.data;\r\n\r\n        setChartData({\r\n          labels,\r\n          datasets: [\r\n            {\r\n              label: \"Calorie Intake\",\r\n              data: calorieData,\r\n              borderColor: \"rgba(75,192,192,1)\",\r\n              backgroundColor: \"rgba(75,192,192,0.2)\",\r\n              fill: true,\r\n            },\r\n          ],\r\n        });\r\n        setError(\"\");\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(\"Failed to fetch calorie data. Please try again later.\");\r\n      }\r\n    };\r\n\r\n    fetchCalorieData();\r\n  }, [user]);\r\n\r\n  return (\r\n    <div style={{ padding: \"2rem\" }}>\r\n      <h1>Dashboard</h1>\r\n      {error ? (\r\n        <p style={{ color: \"red\" }}>{error}</p>\r\n      ) : (\r\n        chartData && <Line data={chartData} options={{ responsive: true }} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,IAAI,QAAQ,iBAAiB;AACtC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EACnB,MAAM;IAAEC;EAAK,CAAC,GAAGC,UAAU,CAACN,WAAW,CAAC;EACxC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACd,MAAMe,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI,CAACN,IAAI,IAAI,CAACA,IAAI,CAACO,EAAE,EAAE;QACrBF,QAAQ,CAAC,gDAAgD,CAAC;QAC1D;MACF;MAEA,IAAI;QACF,MAAMG,QAAQ,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,+CAA+C,EAAE;UAChFC,MAAM,EAAE;YAAEC,OAAO,EAAEX,IAAI,CAACO;UAAG;QAC7B,CAAC,CAAC;QAEF,MAAM;UAAEK,MAAM;UAAEC;QAAY,CAAC,GAAGL,QAAQ,CAACM,IAAI;QAE7CX,YAAY,CAAC;UACXS,MAAM;UACNG,QAAQ,EAAE,CACR;YACEC,KAAK,EAAE,gBAAgB;YACvBF,IAAI,EAAED,WAAW;YACjBI,WAAW,EAAE,oBAAoB;YACjCC,eAAe,EAAE,sBAAsB;YACvCC,IAAI,EAAE;UACR,CAAC;QAEL,CAAC,CAAC;QACFd,QAAQ,CAAC,EAAE,CAAC;MACd,CAAC,CAAC,OAAOe,GAAG,EAAE;QACZC,OAAO,CAACjB,KAAK,CAACgB,GAAG,CAAC;QAClBf,QAAQ,CAAC,uDAAuD,CAAC;MACnE;IACF,CAAC;IAEDC,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACN,IAAI,CAAC,CAAC;EAEV,oBACEH,OAAA;IAAKyB,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAC9B3B,OAAA;MAAA2B,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACjBxB,KAAK,gBACJP,OAAA;MAAGyB,KAAK,EAAE;QAAEO,KAAK,EAAE;MAAM,CAAE;MAAAL,QAAA,EAAEpB;IAAK;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,GAEvC1B,SAAS,iBAAIL,OAAA,CAACJ,IAAI;MAACqB,IAAI,EAAEZ,SAAU;MAAC4B,OAAO,EAAE;QAAEC,UAAU,EAAE;MAAK;IAAE;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CACrE;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC7B,EAAA,CAnDQD,SAAS;AAAAkC,EAAA,GAATlC,SAAS;AAqDlB,eAAeA,SAAS;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}